# ğŸ§§ Red Packet DApp - Frontend

åŸºäº React + TypeScript + Vite æ„å»ºçš„å»ä¸­å¿ƒåŒ–çº¢åŒ…ç³»ç»Ÿå‰ç«¯åº”ç”¨ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **React 19** - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite** - å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·
- **Wagmi v2** - React Hooks for Ethereum
- **Viem v2** - è½»é‡çº§çš„ä»¥å¤ªåŠåº“
- **Apollo Client** - GraphQL çŠ¶æ€ç®¡ç†ï¼Œæ™ºèƒ½ç¼“å­˜
- **React Query** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
- **Tailwind CSS** - åŸå­åŒ–CSSæ¡†æ¶
- **React Hot Toast** - é€šçŸ¥ç»„ä»¶
- **ENS é›†æˆ** - ç”¨æˆ·åå’Œå¤´åƒæ”¯æŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

### é¢„è§ˆç”Ÿäº§æ„å»º
```bash
npm run preview
```

### ä»£ç æ£€æŸ¥
```bash
npm run lint
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”œâ”€â”€ ConnectWallet.tsx        # é’±åŒ…è¿æ¥ç»„ä»¶
â”‚   â”œâ”€â”€ CreateRedPacket.tsx      # åˆ›å»ºçº¢åŒ…ç»„ä»¶ (ç´§å‡‘è®¾è®¡)
â”‚   â”œâ”€â”€ RedPacketList.tsx        # çº¢åŒ…åˆ—è¡¨ç»„ä»¶  
â”‚   â”œâ”€â”€ RedPacketCard.tsx        # çº¢åŒ…å¡ç‰‡ç»„ä»¶ (ç»ç’ƒæ€è®¾è®¡)
â”‚   â”œâ”€â”€ NetworkSwitcher.tsx      # ç½‘ç»œåˆ‡æ¢ç»„ä»¶ (8ä¸ªç½‘ç»œæ”¯æŒ)
â”‚   â”œâ”€â”€ Modal.tsx                # é€šç”¨å¼¹çª—ç»„ä»¶
â”‚   â””â”€â”€ UserProfile.tsx          # ç”¨æˆ·èµ„æ–™ç»„ä»¶ (ENSé›†æˆ)
â”œâ”€â”€ contracts/           # æ™ºèƒ½åˆçº¦ç›¸å…³
â”‚   â””â”€â”€ RedPacketSystem.ts       # åˆçº¦ ABI å’Œé…ç½®
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ useContractTransaction.ts # åˆçº¦äº¤äº’ Hook
â”‚   â”œâ”€â”€ useENS.ts                # ENS åç§°å’Œå¤´åƒ Hook
â”‚   â””â”€â”€ useWalletBalance.ts      # é’±åŒ…ä½™é¢ Hook
â”œâ”€â”€ wagmi.ts            # Wagmi é…ç½® (å¤šç½‘ç»œæ”¯æŒ)
â”œâ”€â”€ App.tsx             # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ main.tsx           # åº”ç”¨å…¥å£ç‚¹ (Apolloé…ç½®)
â””â”€â”€ index.css          # Tailwind CSS æ ·å¼
```

## ğŸŒ Web3 é›†æˆ

### é’±åŒ…è¿æ¥
ä½¿ç”¨ Wagmi çš„ `useConnect` Hook æ”¯æŒå¤šç§é’±åŒ…ï¼š
- MetaMask
- WalletConnect
- Coinbase Wallet
- å…¶ä»– EIP-6963 å…¼å®¹é’±åŒ…

### ç½‘ç»œé…ç½®
åº”ç”¨æ”¯æŒå¤šä¸ªç½‘ç»œï¼Œæ¨è Sepolia æµ‹è¯•ç½‘ï¼š
```typescript
export const config = createConfig({
  chains: [sepolia, mainnet, goerli, holesky, polygon, bsc, arbitrum, optimism],
  transports: {
    [sepolia.id]: http(),
    [mainnet.id]: http(), // ENS è§£æ
    // ... å…¶ä»–ç½‘ç»œ
  },
  pollingInterval: 30_000, // ä¼˜åŒ–è½®è¯¢é—´éš”
});
```

**æ”¯æŒç½‘ç»œ**ï¼š
- ğŸ”§ **Sepolia Testnet** (æ¨è) - çº¢åŒ…åˆçº¦éƒ¨ç½²ç½‘ç»œ
- ğŸŒ **Ethereum Mainnet** - ENS è§£ææ”¯æŒ
- ğŸ§ª **Goerli/Holesky** - ä»¥å¤ªåŠæµ‹è¯•ç½‘
- ğŸ’œğŸŸ¡ğŸ”µğŸ”´ **Layer 2** - Polygonã€BSCã€Arbitrumã€Optimism

### åˆçº¦äº¤äº’
- ä½¿ç”¨ `useWriteContract` è¿›è¡Œå†™æ“ä½œ
- ä½¿ç”¨ `useReadContract` è¿›è¡Œè¯»æ“ä½œ  
- è‡ªå®šä¹‰ Hook `useContractTransaction` å¤„ç†äº¤æ˜“çŠ¶æ€

## ğŸ“Š æ•°æ®æŸ¥è¯¢

### The Graph é›†æˆ
ä½¿ç”¨ Apollo Client è¿æ¥å­å›¾ï¼Œ**æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–**ï¼š
```typescript
const apolloClient = new ApolloClient({
  uri: subgraphUri,
  cache: new InMemoryCache(),
  defaultOptions: {
    watchQuery: {
      pollInterval: 0, // ç¦ç”¨è‡ªåŠ¨è½®è¯¢
      fetchPolicy: 'cache-and-network',
    },
  },
});
```

- æŸ¥è¯¢çº¢åŒ…åˆ›å»ºäº‹ä»¶ (åŒ…å« `creationTime`)
- æŸ¥è¯¢çº¢åŒ…é¢†å–è®°å½• 
- **æ‰‹åŠ¨åˆ·æ–°ä¼˜å…ˆ**ï¼Œæ“ä½œåè‡ªåŠ¨æ›´æ–°

### React Query
ç®¡ç†å®¢æˆ·ç«¯çŠ¶æ€å’Œç¼“å­˜ï¼š
- äº¤æ˜“çŠ¶æ€ç¼“å­˜
- ç”¨æˆ·ä½™é¢æŸ¥è¯¢
- é”™è¯¯é‡è¯•æœºåˆ¶

## ğŸ¨ UI ç»„ä»¶

### CreateRedPacket (åˆ›å»ºçº¢åŒ…)
- **ç´§å‡‘å•å±è®¾è®¡** - æ— éœ€æ»šåŠ¨çš„è¡¨å•å¸ƒå±€
- **çº¢åŒ…å°é¢é£æ ¼** - çº¢è‰²æ¸å˜ + èŠ‚æ—¥æ°›å›´
- **å®æ—¶é¢„è§ˆ** - é‡‘é¢åˆ†é…è®¡ç®—å’Œæœ‰æ•ˆæ€§æ£€æŸ¥
- **æ™ºèƒ½éªŒè¯** - å­—æ®µçº§é”™è¯¯æç¤ºå’ŒåŠ¨ç”»åé¦ˆ

### RedPacketCard (çº¢åŒ…å¡ç‰‡)
- **ç»ç’ƒæ€è®¾è®¡** - backdrop-blur ç°ä»£åŒ–æ•ˆæœ
- **24å°æ—¶å€’è®¡æ—¶** - åˆ›å»ºè€…æå–èµ„é‡‘åŠŸèƒ½ ğŸ¦
- **ENS é›†æˆ** - è‡ªåŠ¨æ˜¾ç¤ºç”¨æˆ·åå’Œå¤´åƒ
- **å±•å¼€è®°å½•** - å¯æŸ¥çœ‹è¯¦ç»†é¢†å–å†å²

### NetworkSwitcher (ç½‘ç»œåˆ‡æ¢)
- **åˆ†å±‚æ˜¾ç¤º** - æ¨èç½‘ç»œ vs å…¶ä»–ç½‘ç»œ
- **è§†è§‰æŒ‡ç¤ºå™¨** - ç‹¬ç‰¹é¢œè‰²å’Œ emoji å›¾æ ‡
- **æ™ºèƒ½æç¤º** - è‡ªåŠ¨è¯†åˆ«å½“å‰ç½‘ç»œçŠ¶æ€

### Modal (é€šç”¨å¼¹çª—)
- **ç®€çº¦è®¾è®¡** - æ¯›ç»ç’ƒèƒŒæ™¯ + åœ†è§’è®¾è®¡
- **å“åº”å¼** - å¤šå°ºå¯¸æ”¯æŒï¼Œå±…ä¸­æ˜¾ç¤º
- **äº¤äº’ä¼˜åŒ–** - ESC é”®å…³é—­ï¼Œç‚¹å‡»å¤–éƒ¨å…³é—­

## ğŸ”§ å¼€å‘é…ç½®

### ESLint é…ç½®
é¡¹ç›®ä½¿ç”¨ TypeScript ESLint é…ç½®ï¼š
- React Hooks è§„åˆ™æ£€æŸ¥
- TypeScript ç±»å‹æ£€æŸ¥
- ä»£ç æ ¼å¼åŒ–è§„åˆ™

### Vite é…ç½®
- React æ’ä»¶æ”¯æŒ
- çƒ­æ¨¡å—æ›¿æ¢ (HMR)
- ç”Ÿäº§æ„å»ºä¼˜åŒ–

### ç±»å‹å®šä¹‰
- å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- æ™ºèƒ½åˆçº¦ ABI ç±»å‹ç”Ÿæˆ
- Web3 ç±»å‹å®‰å…¨

## ğŸ§ª å¼€å‘æœ€ä½³å®è·µ

### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ React Query ç®¡ç†æœåŠ¡ç«¯çŠ¶æ€
- ä½¿ç”¨ React Context ç®¡ç†å…¨å±€çŠ¶æ€
- é¿å…prop drilling

### é”™è¯¯å¤„ç†
- å…¨å±€é”™è¯¯è¾¹ç•Œ
- äº¤æ˜“å¤±è´¥å¤„ç†
- ç½‘ç»œé”™è¯¯é‡è¯•

### æ€§èƒ½ä¼˜åŒ–
- ç»„ä»¶æ‡’åŠ è½½
- å›¾ç‰‡ä¼˜åŒ–
- ä»£ç åˆ†å‰²

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### çº¢åŒ…åˆ›å»º ğŸ§§
- ç´§å‡‘è¡¨å•è®¾è®¡ï¼Œ36px æ§ä»¶é«˜åº¦
- å®æ—¶é¢„è§ˆåˆ†é…ç»“æœ
- ä¸¤ç§æ¨¡å¼ï¼šæ‹¼æ‰‹æ°” vs æ™®é€š
- è¡¨å•éªŒè¯å’Œé”™è¯¯æç¤º

### çº¢åŒ…é¢†å– ğŸ’°
- ç»ç’ƒæ€å¡ç‰‡å±•ç¤º
- ä¸€é”®é¢†å–ï¼Œé˜²é‡å¤
- è¿›åº¦æ¡å’ŒçŠ¶æ€æ˜¾ç¤º
- ENS åç§°è‡ªåŠ¨è§£æ

### èµ„é‡‘æå– ğŸ¦
- 24å°æ—¶å€’è®¡æ—¶æ˜¾ç¤º
- åˆ›å»ºè€…ä¸“ç”¨æƒé™
- è“è‰²ä¸»é¢˜æå–æŒ‰é’®
- è‡ªåŠ¨åˆ·æ–°åˆ—è¡¨

### ç½‘ç»œç®¡ç† ğŸŒ
- 8ä¸ªç½‘ç»œæ”¯æŒ
- æ™ºèƒ½æ¨èç³»ç»Ÿ
- è§†è§‰çŠ¶æ€æŒ‡ç¤º
- ä¸€é”®ç½‘ç»œåˆ‡æ¢

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

- **æ™ºèƒ½ç¼“å­˜**: Apollo Client cache-firstç­–ç•¥
- **ç¦ç”¨è½®è¯¢**: æ‰‹åŠ¨åˆ·æ–°ä¼˜å…ˆï¼Œå‡å°‘APIè¯·æ±‚
- **ENSä¼˜åŒ–**: 5åˆ†é’Ÿç¼“å­˜ï¼Œå‡å°‘é‡å¤è§£æ
- **ç»„ä»¶ä¼˜åŒ–**: useCallback/useMemoæ€§èƒ½æå‡

## ğŸ”— ç›¸å…³é“¾æ¥

- [Wagmi æ–‡æ¡£](https://wagmi.sh/)
- [Viem æ–‡æ¡£](https://viem.sh/)
- [Apollo Client æ–‡æ¡£](https://www.apollographql.com/docs/react/)
- [React Query æ–‡æ¡£](https://tanstack.com/query/latest)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com)
